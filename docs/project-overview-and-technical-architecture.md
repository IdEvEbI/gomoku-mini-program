# 项目开发概述与技术选型

## 一、项目简介

**Gomoku Mini Program** 是一个基于 **微信小程序** 平台开发的五子棋游戏小程序。该小程序支持玩家与 AI 或其他玩家进行实时对战，提供简单、易用且具有挑战性的娱乐体验。后端服务部署在 **阿里云服务器** 上，使用 **Node.js + Express** 提供游戏逻辑和 AI 支持。

本项目采用 **Monorepo** 管理前后端代码，所有代码统一存储在一个仓库中，便于管理和版本控制。

### 主要功能

* **联机对战**：支持玩家与其他人进行实时联网对战，也可以邀请微信好友对战。
* **AI 对战**：玩家可以与 AI 对战，AI 使用剪枝算法（如 `Minimax` 和 `Alpha-Beta` 剪枝）优化决策过程。
* **游戏记录**：记录玩家的胜负记录和每局的棋盘布局。
* **游戏设置**：提供设置功能，调整 AI 难度和其他游戏选项。
* **国际比赛规则**：后续版本将考虑引入禁手、交换等国际比赛规则。

## 二、技术选型与架构设计

本项目采用 **uni-app** + **Vue 3** 技术栈来开发五子棋小程序，结合后端的 **Node.js + Express** 和 **阿里云** 部署。以下是技术栈和架构的详细介绍：

### 1. 前端技术栈

* **Vue 3**：用于构建用户界面，采用响应式的数据绑定和组件化开发。
* **uni-app**：跨平台框架，用于将 Vue 3 代码编译为微信小程序，支持跨平台部署。
* **Pinia**：Vue 3 推荐的状态管理库，用于管理游戏状态，如棋盘、玩家信息等。
* **Vue Router**：用于页面路由和导航管理，适配小程序的页面切换。
* **ESLint & Prettier**：用于代码质量检测和自动格式化，确保代码的一致性和可维护性。

### 2. 后端技术栈

* **Node.js + Express**：用于构建后端服务，处理游戏数据和 AI 逻辑，保证数据的流畅性和响应性。
* **Docker**：用于容器化部署，确保后端服务环境一致性，便于多环境部署。
* **阿里云服务器**：用于托管后端服务，提供稳定的云计算资源，确保高可用性。

### 3. 测试工具

* **Vitest**：用于前端单元测试，确保游戏逻辑的正确性和稳定性。

### 4. CI/CD 工具

* **GitHub Actions**：用于自动化构建、测试和部署，确保每次提交的代码都经过验证，并能成功部署到生产环境。

## 三、项目架构

本项目采用 **Monorepo** 结构，前后端代码集中在一个仓库中。项目结构清晰，易于维护和扩展。以下是项目的目录结构：

```bash
gomoku-mini-program/
├── docs/               # 开发过程文档
├── frontend/           # 前端小程序代码
│   ├── src/            # Vue 3 源代码
│   ├── pages/          # 页面目录
│   └── components/     # 组件目录
├── backend/            # 后端服务代码
│   ├── src/            # 后端服务源代码
│   └── Dockerfile      # 后端 Docker 配置文件
├── .gitignore          # Git 忽略文件
├── package.json        # 项目依赖配置
├── README.md           # 项目说明文档
└── .github/            # GitHub Actions 配置
    └── workflows/      # CI/CD 流水线配置
```

### 项目目录说明

* **docs/**：用于存放开发过程文档，记录项目开发的各个阶段。
* **frontend/**：前端小程序代码，采用 **uni-app** 和 **Vue 3** 技术栈开发。
* **backend/**：后端服务代码，提供游戏逻辑和 AI 支持。
* **.github/**：GitHub Actions 配置，管理 CI/CD 流程。

## 四、开发进度与迭代规划

本项目采取 **敏捷开发** 和 **快速迭代** 的开发方式。开发过程将分为多个阶段，每个阶段明确任务和目标。以下是项目的迭代规划：

### 1. 阶段一：环境搭建与工具配置（0.5 周）

* 安装和配置 **微信开发者工具** 和 **Node.js** 环境。
* 初始化 **Monorepo** 结构，创建 GitHub 仓库。
* 配置 **前端框架**（**uni-app + Vue 3**）和 **后端框架**（**Node.js + Express**）。
* 配置 **CI/CD 流程**（使用 **GitHub Actions**）进行自动化构建和测试。

### 2. 阶段二：前端页面和基本游戏逻辑（1 周）

* 完成游戏大厅、游戏对战页面的前端开发。
* 实现棋盘的绘制、玩家下棋功能以及棋盘状态更新。

### 3. 阶段三：AI 算法与优化（1 周）

* 设计并实现 **AI 对战** 的基本算法，使用剪枝算法（如 Minimax 和 Alpha-Beta 剪枝）优化 AI 决策过程。
* 优化 AI 难度，确保 AI 能够提供一定的挑战性。

### 4. 阶段四：游戏记录与数据存储（1 周）

* 实现玩家的游戏记录功能，包括胜负记录和每局的棋盘布局。
* 将玩家数据和游戏记录存储到后端或数据库。

### 5. 阶段五：测试与部署（0.5 周）

* 编写单元测试，确保游戏逻辑和 AI 算法的正确性。
* 配置并测试 **CI/CD 流程**，实现自动化构建、测试和部署。
* 提交小程序审核，并上线发布。

## 五、后端服务与部署

后端服务使用 **Node.js + Express** 开发，并部署在 **阿里云服务器** 上。为了确保环境的一致性，后端服务采用 **Docker** 容器化部署。以下是后端服务的部署流程：

### 1. Docker 部署

在后端目录中，使用以下命令构建 Docker 镜像并运行容器：

```bash
docker build -t gomoku-backend .
docker run -d -p 3000:3000 gomoku-backend
```

### 2. 阿里云部署

* 选择 **阿里云 ECS** 实例作为服务器，确保具有足够的带宽和计算资源。
* 配置安全组和防火墙规则，确保后端服务能够通过 HTTP/HTTPS 接口对外提供服务。

## 六、总结

通过本项目，我们将开发一个既简单又具有挑战性的五子棋小程序，提供丰富的娱乐体验，同时帮助开发者掌握 **Vue 3**、**uni-app**、**Node.js**、**Docker** 等技术的应用。本项目的开发遵循 **DevOps** 流程，结合 **CI/CD** 和 **单元测试**，确保代码质量和开发效率。
